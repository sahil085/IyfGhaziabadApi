package com.IyfGZB.util;

import org.apache.commons.lang.StringUtils;

import java.io.*;
import java.net.URL;
import java.net.URLConnection;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class SendSms{

    public static void main(String[] args)
    {
        String udgaarPhoneList = "7017541770,8588834521,9555437943,8860511363,9149293050,9897368874,9258944520,9650633752,8076132567,9149377546,8077161300,9953494322,9005978780,9554765199,8799762169,7895564579,9599239753,7065423255,9557748756,7351672376,8273374396,8979160337,7906158601,8077496006,7465849636,7599957768,8474939738,7503344499,7060000490,7417636385,8130375035,8826504047,7417009170,9068846922,9012234421,9643390833,9838896466,8193993992,8630666432,7078854070,9917542702,9560670586,7011456991,8750911316,9760571919,8266099464,8439701975,8650354455,7017797441,9557571387,8077942986,8630577359,9416958068,8941083761,7830256855,8527308319,9560938893,9871176706,7042314623,8449887361,8077179137,9899510144,9811899931,8076001877,9953247951,9599038023,9910806151,8447799727,9210000639,9213271580,7982688029,9953695918,7503257125,9716969653,9560808305,7905583758,9634296643,9911000168,7678547639,8587046466,9811540014,9818490866,8800371968,9717901019,9540258458,9953189945,9953702339,9811934314,9716337987,7210872479,9953265887,9868639584,9818404601,7503781123,8920854243,7011791808,8285085508,8860173233,9717518232,9582989919,8076284370,8527924316,9717229067,8700088013,8929326832,9560285384,7042743115,9716380217,8882633361,9310829655,9717737109,9718858777,7065697692,8377831734,9560641190,8800515956,9792244951,9540233799,9311529717,8512870863,9540212323,6200323937,7678268464,8651369834,8077058174,8826932636,7838060230,7838244093,7302740821,8630693449,7599318718,7011787733,7835975044,7503249082,9654557932,7053043066,7827216538,9219167419,9871210597,9971163554,8369752153,9891889947,8285321644,9999639767,9654169000,9958382933,8800144136,8448822151,8527600622,8953830288,6395124074,8076880328,9650162192,8127976050,7376745234,8181005265,7355196198,8218545791,9721730864,9999444493,9871427900,8860405391,7985870153,8765039479,9870853632,9891620198,8178914539,9917723332,9958704844,9310217947,9953522058,8610172712,8750019849,9318474651,9555502469,9643878538,8285860700,7053052532,9911661303,9968944542,9918122908,8077887918,8923348481,8218050524,7838675689,8601159068,9999703138,7417812107,9411892196,9873721692,9910726401,9717410837,9005615566,9971596721,7217874847,7903599033,9654146559,9129974916,8859167442,8920041231,9540941141,9958473800,8188810855,9958107164,9953254461,9650444899,9873571438,7836868180,9917015608,9557535457,8505813574,8527224790,9318376406,8920339943,9044587172,8375818918,9891244832,8439320495,9140059401,9871936490,9634393134,8929909125,7084189406,9582119777,9654630010,9555437643,9899365225,9675775352,9997195822,7417713702,9582192526,9213159811,7838093078,9717237983,9582521952,7352299931,9667709060,9953102233,7800883909,8130039731,9999426976,8076217354,7503362867,9911724304,8285885513,7017318837,8802333419,9315877760,8750039650,8826118697,9205282061,7836852437,7906486619,9821279570,8447055886,9871918929,7250854643,9631692926,7065545272,9711172193,9878978159,8799779694,7309565601,9412592252,9643163521,7701975670,8010279221,8576972122,7800268987,9953446554,8010322695,8077668355,7376341488,7752980164,8810402293,7838047064,8743960331,9540482777,9811098834,7678185850,9599803013,8130587752,9999601540,9990773991,9911182907,9818026595,8375057112,9818140423,9212884005,9650053563,8368284241,9818436985,7887033335,9013268098,9911438838,8859734525,8410618965,8707083612,7017163925,9315168866,7317379243,8505830255,8954302019,8837578856,8826119608,9540614722,7827487010,9870874257,9560686441,9559971280,9013664292,9758520597,7065732247,9929255265,8394909735,9639176124,9627595050,,8707027697,8279874712,7302808636,9455390022,7007912346,8750352103,7536093608,8650995794,6387680322,8787011321,8826344218,8860405038,9410616913,9582014512,7503341928,8077826117,8574747427,8505852591,7065469636,9654887596,8171733679,9557480337,7042610770,9667531996,8923745739,9871993481,9999625999,9999380205,7678333690,6388468605,9910528338,8840183202,7065697013";
        String templePreachingList = "8296685752,8755818001,9599760490,8910160113,9871869421,9643273702,8750333034,9962066765,7906660207,9311880181,7011793035,989981944,8700516292,9873830459,9953492691,9654499943,9198014363,9643699433,8924803076,9711915368,9958770206,9205913069,9871405191,7210270407,8130939532,9891856846,9354485371,8826759611,7042212696,9717513972,9354686597,9971299470,7065515276,8130113728,9625730889,8076720570,9971625928,7834873188,8510935811,9599258624,9818168791,8090208755,7053262974,7838805318,9454365800,7011565915,7011632040,9695895887,7755011181,7834827860,7557482394,9450237015,8052422975,9818579834,8971744654,7409092854,9453068973,8130321061,8433480996,8510948149,7087132949,9720227161,7053161772,7065697018,7011681017,8505929165,7599072177,9084976587,8630217984,7065179155,7042423703,8085860700,7292065692,7503533266,9711697409,9455565781,8860013842,7017458951,8004621617,9415926824,8077678045,8285877593,8650106426,8860469247,8178184121,7210514467,8887936739,9716654025,8076074935,7053591754,8447633488,9540090469,7065173851,7678571661,8410866106,8181818961,9773576418,7834903481,9717016283,8588038421,7017199204,9205848596,8171944343,8630217984,7065697848,8586946918,9910477604,7060823224,7985829365,7905284335,8090208755,7015458951,8802513108,9971150184,9457009251,8382047716,7011972088,9718122862,7065210507,9555952328,9540312763,9454149839,9455790196,8100189931,7014782513,9412181527,8585945542,9899589803,9990570753,9990570753,8010001684,9453822257,8750462896,9911326067,7210200565,8383915128,7210572554,7836956270,8439028110,9136475327,9990662472,8439391008,9990514214,8373994220,9958816720,8802647934,8090612466,8004417148,9634065764,7503618450,9627595050,7503692198,8418806387,7838384072,9958085638,9716718532,9675272952,8802326141,9759919239,9717854258,8800806458,9717686880,7827518207,9650693923,9910428426,9720958201,8277980483,9654969053,8218876059,8860414122,9711077318,8285441729,9927650722,9756886567,7530878278,9911596079,9971361932,8802014152,9718788321,8178303316,7557479224,8210275967,7376786660,8750779733,7530833779,9016903520,7873202978,9045813150,8448620271,9540125155,8299016767,9540724212,9711970937,9838582869,8527589246,9312667387,9795413434,8010455416,9455451920,7065210540,9452098639,8860469247,7053052532,9582119777,7532849435,9455447891,9670148352,9956429212,7211284397,9458210313,9711046978,7985739049,8433002434,9560797683,9456066734,7042480380,9515050189,7737742021,8368870412,8218153312,8799749696,7830562800,8756898583,7999956425,9717243150,9411806290,8409616775,7531062612,7065147088,8009681274,9717270169,9997135956,8178340540,7042720115,9557535457,9810753612,8010423232,9540966580,8565031459,7557315848,8077548110,8505858344,8299123740,7860141493,9069767427,7755879791,9079771991,7500962269,9918251737,7530909074,8285541585,9918728789,9990971454,8630522303,7048962107,7983422938,7052140030,9656376381,8090722803,9811095294,7503232320,7081574061,9911908248,8585969800";
        String finalList[] = (udgaarPhoneList+templePreachingList).split(",");
        System.out.println(finalList.length);
        Double messageSendPerCall = Math.ceil((double) finalList.length/200);
//        Double messageSendPerCall = 1.0;
        while (messageSendPerCall > 0) {
            int startIndex = ((int)Math.round(messageSendPerCall) * 200 ) -200;
            int endIndex = startIndex+1 + 200;
            List<String> mobileList = new ArrayList<>();
            for (int i=startIndex; i < endIndex && i < finalList.length ; i++) {
                mobileList.add(finalList[i]);
            }
            //Your user name
            String username = "iyfgzb";
            //Your authentication key
            String authkey = "09151ef124XX";
            //Multiple mobiles numbers separated by comma (max 200)
            String mobiles = StringUtils.join(mobileList,',');
            System.out.println(mobiles);
            //Sender ID,While using route4 sender id should be 6 characters long.
            String senderId = "INFOSM";
            //Your message to send, Add URL encoding here.
            String message =
                    "ISKCON Youth Forum happily invites you for Youth Empowerment Program from Bhagvad Gita\n" +
                    "\n" +
                    "Topic - Technology - Boon or Bane\n" +
                    "\n" +
                    "By Adbhuta Narsingh Sir\n" +
                    "Worked in Atos Syntel \n" +
                    "\n" +
                    "Features:\n" +
                    "Life changing secrets & success sutras from the perspective of Bhagvad Gita and Free Snacks for everyone\n" +
                    "\n" +
                    "Venue: ISKCON Ghaziabad \n" +
                    "\n" +
                    "Timings: 4:30 - 6:00 PM\n" +
                    "\n" +
                    "Date: 20/01/19\n" +
                    "\n" +
                    "For More Details:\n" +
                    "\n" +
                    "8375818918 Harsh Saxena \n" +
                    "8920041231 Sahil Verma";
//            String message = "ISKCON Youth Forum happily invites you for our weekly Youth Empowerment program. \n" +
//                    "\n" +
//                    "Topic - POWER OF WORK with Bhagavad Gita \n" +
//                    "Speaker - Ashish Mishra\n" +
//                    "( M.tech from IIT Delhi )\n" +
//                    "\n" +
//                    "Features:\n" +
//                    "Heart transforming session from the timeless wisdom of Vedic literature and with a delicious sumptuous meal.\n" +
//                    "\n" +
//                    "Our Forum Also Facilitates Regarding Following Concern\n" +
//                    "1.) Stress management\n" +
//                    "2.) Career planning\n" +
//                    "3.) Professional excellence\n" +
//                    "4.) Inferiority complex\n" +
//                    "\n" +
//                    "Venue: ISKCON Ghaziabad Seminar Hall\n" +
//                    "\n" +
//                    "Date : 30 - Dec - 2018\n" +
//                    "\n" +
//                    "Timings: 4:30 - 6:00 PM\n" +
//                    "\n" +
//                    "For more details feel free to contact :\n" +
//                    "\n" +
//                    "8375818918 - Harsh\n" +
//                    "8920041231 - Sahil";
            //define route
            String accusage = "1";

            //Prepare Url
            URLConnection myURLConnection = null;
            URL myURL = null;
            BufferedReader reader = null;

            //encoding message
            String encoded_message = URLEncoder.encode(message);

            //Send SMS API
            String mainUrl = "http://sms.ontimeinfotech.com/submitsms.jsp?";

            //Prepare parameter string
            StringBuilder sbPostData = new StringBuilder(mainUrl);
            sbPostData.append("user=" + username);
            sbPostData.append("&key=" + authkey);
            sbPostData.append("&mobile=" + mobiles);
            sbPostData.append("&message=" + encoded_message);
            sbPostData.append("&accusage=" + accusage);
            sbPostData.append("&senderid=" + senderId);

            //final string
            mainUrl = sbPostData.toString();
            try {
                //prepare connection
                myURL = new URL(mainUrl);
//                myURLConnection = myURL.openConnection();
//                myURLConnection.connect();
//                reader = new BufferedReader(new InputStreamReader(myURLConnection.getInputStream()));
                //reading response
//                String response;
//                while ((response = reader.readLine()) != null)
//                    print response
//                    System.out.println(response);

                //finally close connection
//                reader.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
            messageSendPerCall--;
        }
    }
}
